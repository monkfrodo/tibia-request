<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tibia Access Manager</title>

<style>
    /* ===== BACKGROUND ===== */
    body {
        margin: 0;
        padding: 0;
        background: url("https://www.tibiabr.com/wp-content/uploads/2020/01/paulo-silvente-roshamuul-ld-alternative.jpg")
            no-repeat center center fixed;
        background-size: cover;
        font-family: "Verdana", sans-serif;
        color: #fff;
    }

    /* ===== FIRST OVERLAY (escurece imagem) ===== */
    .overlay-dark {
        background: rgba(0, 0, 0, 0.60);
        backdrop-filter: blur(3px);
        width: 100%;
        min-height: 100vh;
        position: relative;
        z-index: 1;
    }

    /* ===== SECOND OVERLAY (gradiente dourado muito suave) ===== */
    .overlay-gold {
        background: linear-gradient(
            to bottom,
            rgba(171, 140, 53, 0.12) 0%,
            rgba(0, 0, 0, 0.2) 40%,
            rgba(171, 140, 53, 0.15) 100%
        );
        width: 100%;
        min-height: 100vh;
        position: absolute;
        top: 0;
        left: 0;
        z-index: 2;
    }

    /* ===== CONTAINER CENTRAL ===== */
    .container {
        position: relative;
        z-index: 3;
        max-width: 540px;
        margin: 0 auto;
        margin-top: 60px;
        padding: 32px;
        border-radius: 12px;

        background: rgba(0, 0, 0, 0.70);
        border: 2px solid #c9a74a;
        box-shadow: 0 0 25px rgba(0, 0, 0, 0.7),
                    0 0 12px rgba(255, 220, 80, 0.25);
    }

    /* ===== TITULOS ===== */
    h1 {
        font-size: 30px;
        margin-bottom: 5px;
        font-weight: bold;
        text-shadow: 2px 2px 3px #000;
        color: #f5d98b;
    }

    .subtitle {
        font-size: 14px;
        margin-bottom: 26px;
        opacity: 0.9;
    }

    /* ===== ICONE ===== */
    .icon {
        width: 72px;
        height: 72px;
        border-radius: 8px;
        margin-bottom: 16px;
        image-rendering: pixelated;
        border: 2px solid #c9a74a;
        background: rgba(0,0,0,0.4);
        padding: 4px;
    }

    /* ===== INPUTS ===== */
    input {
        width: 100%;
        padding: 12px;
        margin-bottom: 16px;
        background: #181818;
        color: #fff;
        border: 1px solid #8f6d2c;
        border-radius: 6px;
        font-size: 15px;
        box-shadow: inset 0 0 4px rgba(0,0,0,0.5);
    }

    input:focus {
        outline: none;
        border-color: #d9b04c;
        box-shadow: 0 0 6px rgba(217,176,76,0.6);
    }

    /* ===== BOTAO ===== */
    button {
        width: 100%;
        padding: 15px;
        background: linear-gradient(#c9a74a, #8f6d2c);
        color: #000;
        font-weight: bold;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        text-shadow: 1px 1px 1px rgba(255,255,255,0.3);
    }

    button:hover {
        background: linear-gradient(#e6c86a, #9c7a34);
    }

    /* ===== RESULTADOS ===== */
    .result-box {
        margin-top: 20px;
        padding: 14px;
        border-radius: 6px;
        background: rgba(0, 0, 0, 0.55);
        border: 1px solid #c9a74a;
        display: none;
        text-align: left;
        line-height: 1.6;
    }
</style>
</head>

<body>

<div class="overlay-dark"></div>
<div class="overlay-gold"></div>

<div class="container">

    <img class="icon" src="https://www.tibiawiki.com.br/images/0/0f/Ferumbras.gif" />

    <h1>Tibia Access Manager</h1>
    <div class="subtitle">Valide seu personagem e registre acessos de quests e bosses.</div>

    <input id="charName" placeholder="Digite o nome do seu personagem" />
    <button onclick="validateCharacter()">Validar Personagem</button>

    <div id="charResult" class="result-box"></div>

    <div id="questForm" style="display:none; margin-top: 20px;">
        <input id="questName" list="questsList" placeholder="Digite a quest/boss desejado" />
        <datalist id="questsList"></datalist>

        <button onclick="sendRequest()">Enviar Pedido</button>
    </div>

</div>


<script>
/* === CARREGAR QUESTS === */
fetch("quests.json")
    .then(r => r.json())
    .then(data => {
        const list = document.getElementById("questsList");
        data.sort().forEach(q => {
            const o = document.createElement("option");
            o.value = q;
            list.appendChild(o);
        });
    });

/* === VALIDAR PERSONAGEM === */
function validateCharacter() {
    const name = document.getElementById("charName").value.trim();
    if (!name) return alert("Digite o nome do personagem.");

    fetch(`https://api.tibiadata.com/v4/character/${name}`)
        .then(r => r.json())
        .then(d => {
            const box = document.getElementById("charResult");

            if (!d.character || d.character.error) {
                box.style.display = "block";
                box.innerHTML = "❌ Personagem não encontrado.";
                return;
            }

            const data = d.character;
            box.style.display = "block";
            box.innerHTML = `
                <b>Nome:</b> ${data.name}<br>
                <b>Nível:</b> ${data.level}<br>
                <b>Vocação:</b> ${data.vocation}
            `;

            document.getElementById("questForm").style.display = "block";
        });
}

/* === ENVIAR REQUEST === */
function sendRequest() {
    const name = document.getElementById("charName").value.trim();
    const quest = document.getElementById("questName").value.trim();

    if (!quest) return alert("Digite a quest/boss.");

    fetch("https://script.google.com/macros/s/AKfycbxXNT-qfqMwpDpI5YidY8ZS1_DFS3Ey2bP39qj4KM-DL2wljYaa6dptBrSs-D5dZhNk/exec", {
        method: "POST",
        body: JSON.stringify({ name, quest })
    });

    alert("Pedido enviado!");
}
</script>

</body>
</html>
