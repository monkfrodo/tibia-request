<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Tibia Access Manager</title>

<style>
    body {
        margin: 0;
        padding: 0;
        background: url("https://www.tibiabr.com/wp-content/uploads/2020/01/paulo-silvente-roshamuul-ld-alternative.jpg") 
            no-repeat center center fixed;
        background-size: cover;
        font-family: "Verdana", sans-serif;
        color: #fff;
    }

    /* Overlay elegante que NÃO empurra nada */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.55);
        backdrop-filter: blur(4px);
        z-index: 1;
    }

    /* Wrapper que centraliza tudo */
    .center-wrapper {
        position: relative;
        z-index: 2;
        width: 100%;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    /* Caixa central minimalista */
    .card {
        background: rgba(0, 0, 0, 0.70);
        padding: 35px;
        border-radius: 12px;
        width: 100%;
        max-width: 480px;
        text-align: center;
        box-shadow: 0 0 18px rgba(0, 0, 0, 0.7);
        border: 1px solid rgba(255, 215, 0, 0.35);
    }

    /* Ícone limpo */
    .icon {
        width: 60px;
        height: 60px;
        image-rendering: pixelated;
        margin-bottom: 15px;
    }

    h1 {
        font-size: 26px;
        margin-bottom: 10px;
        font-weight: bold;
        text-shadow: 1px 1px 2px #000;
        color: #f5d98b;
    }

    .subtitle {
        font-size: 13px;
        margin-bottom: 25px;
        opacity: 0.85;
    }

    input {
        width: 100%;
        padding: 12px;
        background: rgba(255,255,255,0.07);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 6px;
        margin-bottom: 18px;
        color: #fff;
        font-size: 15px;
    }

    input:focus {
        outline: none;
        border-color: #d8b45a;
        background: rgba(255,255,255,0.12);
    }

    button {
        width: 100%;
        padding: 14px;
        font-size: 15px;
        font-weight: bold;
        background: #d1ac4a;
        color: #000;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }

    button:hover {
        background: #e6c86a;
    }

    .result-box {
        margin-top: 15px;
        padding: 12px;
        background: rgba(0,0,0,0.60);
        border-radius: 6px;
        border: 1px solid rgba(255, 215, 0, 0.3);
        display: none;
        text-align: left;
        line-height: 1.6;
        font-size: 14px;
    }
</style>
</head>

<body>

<div class="overlay"></div>

<div class="center-wrapper">
    <div class="card">

        <img src="https://www.tibiawiki.com.br/images/0/0f/Ferumbras.gif" class="icon">

        <h1>Tibia Access Manager</h1>
        <div class="subtitle">Valide seu personagem e registre acessos de quests e bosses.</div>

        <input id="charName" placeholder="Digite o nome do seu personagem" />

        <button onclick="validateCharacter()">Validar Personagem</button>

        <div id="charResult" class="result-box"></div>

        <div id="questForm" style="display:none; margin-top:20px;">
            <input id="questName" list="questsList" placeholder="Digite a quest/boss (autocomplete)" />
            <datalist id="questsList"></datalist>

            <button style="margin-top:10px;" onclick="sendRequest()">Enviar Pedido</button>
        </div>

    </div>
</div>

<script>
/* Carregar quests */
fetch("quests.json")
    .then(r => r.json())
    .then(data => {
        const list = document.getElementById("questsList");
        data.sort().forEach(q => {
            let o = document.createElement("option");
            o.value = q;
            list.appendChild(o);
        });
    });

/* Validar personagem */
function validateCharacter() {
    const name = document.getElementById("charName").value.trim();
    if (!name) return alert("Digite o nome do personagem.");

    fetch(`https://api.tibiadata.com/v4/character/${name}`)
        .then(r => r.json())
        .then(d => {
            const box = document.getElementById("charResult");

            if (!d.character || d.character.error) {
                box.style.display = "block";
                box.innerHTML = "❌ Personagem não encontrado.";
                return;
            }

            const data = d.character;

            box.style.display = "block";
            box.innerHTML = `
                <b>Nome:</b> ${data.name}<br>
                <b>Nível:</b> ${data.level}<br>
                <b>Vocação:</b> ${data.vocation}
            `;

            document.getElementById("questForm").style.display = "block";
        });
}

/* Enviar request */
function sendRequest() {
    const name = document.getElementById("charName").value.trim();
    const quest = document.getElementById("questName").value.trim();

    if (!quest) return alert("Digite a quest/boss.");

    fetch("https://script.google.com/macros/s/AKfycbxXNT-qfqMwpDpI5YidY8ZS1_DFS3Ey2bP39qj4KM-DL2wljYaa6dptBrSs-D5dZhNk/exec", {
        method: "POST",
        body: JSON.stringify({ name, quest })
    });

    alert("Pedido enviado!");
}
</script>

</body>
</html>
